<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- Academicon Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

    <!--Own css-->
    <link rel="stylesheet" href="../../assets/css/main.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,400&display=swap"
        rel="stylesheet">
    <title>Prof. Dr. Viola Priesemann</title>

    <!--
    <link rel="icon" href="./img/viola_32x32.png" type="image/png">
  -->
    <!-- load content dynamically script-->
    <!-- <script src="../../assets/js/loadcontent.js"></script> -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="../../assets/js/plotting.js"></script>
    <!-- Bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous">
        </script>
    <link rel="stylesheet" href="../../assets/css/blog.css">
    <!-- <script src="./assets/js/plotting.js"></script> -->
</head>

<body>
    <div id="main-content">
        <button type="button" class="mobile-navigator-toggle d-xl-none"><i class="bi bi-list"></i></button>
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar with picture, general links and navigation -->
                <div id="sidebar" class="d-none d-md-flex col-md-3 col-xl-2 text-light bg-dark">
                    <img src="../../assets/img/viola_400x400.jpg" class="rounded-circle">
                    <h4>Prof. Dr. Viola Priesemann</h4>

                    <!--div class="links">
                <a class="icon-link" href="https://scholar.google.de/citations?user=5oK8Ek4AAAAJ&hl=de">
                  <i class="ai ai-google-scholar"></i>
                </a>
                <a class="icon-link" href="https://arxiv.org/a/0000-0001-8905-5873.html">
                  <i class="ai ai-arxiv"></i>
                </a>
                <a class="icon-link" href="https://orcid.org/0000-0001-8905-5873">
                  <i class="ai ai-orcid"></i>
                </a>
                <a class="icon-link" href="https://twitter.com/violapriesemann">
                  <i class="bi bi-twitter"></i>
                </a>
                <a class="icon-link" href="https://github.com/Priesemann-Group/">
                  <i class="bi bi-github"></i>
                </a>
              </div-->

                    <div class="title">
                        <hr>
                        <h5>Physics, Complex Systems &amp; Neural Networks</h5>
                    </div>

                    <nav id="navbar" class="navbar navbar-dark bg-dark text-light">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a id="navlink_research" class="nav-link" href="../../index.html#research">Research
                                    Topics</a>
                            </li>
                            <li class="nav-item">
                                <a id="navlink_group" class="nav-link" href="../../index.html#group">Group members</a>
                            </li>
                            <li class="nav-item">
                                <a id="navlink_blogs" class="nav-link" href="../../index.html#blogs">Blogs</a>
                            </li>
                            <li class="nav-item">
                                <a id="navlink_cv" class="nav-link" href="../../index.html#cv">CV</a>
                            </li>
                            <li class="nav-item">
                                <a id="navlink_collaborations" class="nav-link"
                                    href="../../index.html#collaborations">Collaborations</a>
                            </li>
                            <li class="nav-item">
                                <a id="navlink_contact" class="nav-link" href="../../index.html#contact">Contacts</a>
                            </li>
                            <!--<li class="nav-item">
                    <a id="navlink_talksntravel" class="nav-link" href="#talksntravel">Talks &amp; Travel</a>
                  </li>-->
                        </ul>
                    </nav>

                    <footer>
                        <hr>
                        <div class="footer">
                            <div class="address">
                                MPI for Dynamics and<br>
                                Self-Organization<br>
                                Am Fassberg 17<br>
                                D &#8211; 37077 Göttingen
                            </div>
                            <div class="address">
                                &#169; PriesemannLab<br>
                                <a id="navlink_impressum" class="nav-link" style="padding: 0;"
                                    href="#impressum">Impressum</a>
                                <a id="navlink_datenschutz" class="nav-link" style="padding: 0;"
                                    href="#datenschutz">Datenschutz</a>
                            </div>
                        </div>
                    </footer>
                </div>
                <!-- Content is loaded dynamically into here-->
                <div id="content" class="col no-padding ">
                    <div class="row identity bg-light text-dark">
                        <h1 class="col col-xl-10 col-md-12 align-self-center"> About complex infection dynamics - and how
                            we are the ones creating them </h1>
                        <br>
                        <h6 class="col col-xl-10 col-md-12 align-self-center">by Marija Docenko and Simon Bauer</h6>
                        </p>
                    </div>

                    <!-- -------------------- -->
                    <!-- Part I: Introduction -->
                    <!-- -------------------- -->
                    <div class="content col col-xl-10 col-md-12 align-self-center">
                        <blog>

                            Remember looking at the infection statistics during the COVID-19 pandemic and the way the
                            numbers looked so random, even unpredictable? And although unpredictability is quite big of a
                            word, we can agree that in contrast to Influenza (of which we expect one peak every year around
                            late winter), COVID-19 showed no comparable stability or structure – so why is that?
                            <br>
                            <div class="bg-light">
                                <div class="container">
                                    <div class="column">
                                        <div>
                                            <div id="plot_influenza1"></div>
                                        </div>
                                        <div>
                                            <div id="plot_influenza2"></div>
                                        </div>
                                        <div id="plot_influenza3"></div>
                                    </div>
                                    <div class="column">
                                        <div id="plot_covid1"></div>
                                        <div id="plot_covid2"></div>
                                        <div id="plot_covid3"></div>
                                    </div>
                                </div>
                            </div>
                            <br>

                            Researchers from the Max Planck Institute for Dynamics and Self-Organisation took a deeper look
                            at what drives such infection dynamics, including how societal reactions can influence the
                            spread of the infection itself. More specifically, they showed with the help of a model that
                            <em>society’s behaviour can actually induce complex dynamics</em>. Not only that: Such
                            complexity can even be <em>optimal</em> when considering expected costs.

                            <br><br>
                            So let's dive into what they found.
                            <br><br>
                            <h5>If there's a virus, what drives infection waves?</h5>
                            <dl>
                                <top id="marker_seasonality">As we know from Influenza, <span
                                        class="seasonality">seasonality</span> is one aspect that creates oscillation. We
                                    observe infection numbers decreasing in the summer and rising in the winter, as people
                                    stay indoors more and it's easier to get infected etc. The green graph visualizes this
                                    yearly peak.</top>
                                </dd>
                                <dt>
                                    <div id="plot1"></div>
                                </dt>

                                <dd>
                                    <p style="margin-bottom: 20em;"></p>

                                    <top id="marker_mitigation1">Yet the factor that gained importance during COVID-19 is
                                        society's preventative disease <span class="mitigation">mitigation</span>, meaning
                                        different measures to fight infections, such as the introduction of masks or the
                                        reduction of social interactions.
                                    </top>
                                    <p style="margin-bottom: 20em;"></p>
                                    <top id="marker_mitigation2">The intensity of these mitigation measures depends on the
                                        severity of the disease spread, i.e., how many people are infected – so as infection
                                        numbers rise, society's mitigation does too, until that eventually leads to the wave
                                        getting broken and infections going down again.
                                    </top>
                                    <p style="margin-bottom: 20em;"></p>
                                    <top id="marker_mitigation3">When infection numbers are low, mitigation is accordingly
                                        lowered – which then leads to recurring infection waves. Generally speaking, as we
                                        adapt to the infection numbers, we correspondingly proceed to change them –
                                        resulting in yet another adaptation and change. As a sole factor, this "feedback
                                        loop" would result in dynamics such as shown by the blue graph.</top>
                                    <p style="margin-bottom: 20em;"></p><br>
                                    <top id="marker_combined">
                                        <div class="bg-white text-dark" style="padding-left:100px; margin-left:-100px;">
                                            <h5 style="background-color: rgba(255, 255, 255, 0.9);">Two driving forces
                                                interacting can create complexity</h5>
                                            However, if seasonality and mitigation have comparable influences and affect
                                            each
                                            other similarly, a combination of both factors can result in complex infection
                                            dynamics. These give rise to completely different graphs, as shown by this
                                            example.
                                        </div>
                                    </top>
                                    <p style="margin-bottom: 20em;"></p><br>
                                </dd>

                            </dl>
                            <top>What's clear: The spreading shows no visible structure comparable to the ones we
                                saw when considering the forces individually. (Coming back to COVID-19, we remember
                                that mitigation was strongly present during the pandemic; Influenza, on the other
                                hand, society does not mitigate to an extent anywhere close. Accordingly, we
                                witnessed complex dynamics during COVID-19, but see yearly peaks of Influenza.)
                                <br><br>
                                In contrast to seasonality, which we cannot actually control, society’s mitigation
                                is variable. But what effects would different mitigation behaviours have on
                                infection dynamics?
                            </top>
                            <br>
                            <br>

                            <h5>How are infection dynamics influenced by society?</h5>
                            To break it down, society’s influence on infections largely depends on <em>how intensely and how
                                fast </em> it reacts to them. More specifically, we measure it using the <em>maximal amount
                                of mitigation that society is willing to adopt</em> (<b>maximal mitigation</b>), and the
                            <em>time it lets pass before it reacts</em> (<b>mitigation delay</b>).
                            <br><br>
                            The scientist’s model can show us how specific mitigation behaviours (consisting of these
                            two characteristics) would shape infection dynamics by calculating the corresponding course
                            of infection. <em>These infection dynamics differ for different mitigation behaviours</em>. Due
                            to this dependency on behaviour, we can order the dynamics in a coordinate system, in which
                            every spot represents a combination of how quickly and intensely society implements
                            measures. To create a visible structure of the corresponding dynamics, each spot can be
                            assigned a colour according to their exhibited <b>number of infection waves</b> per
                            year.

                            <!-- ----------------------- -->
                            <!-- Part II: Arnold tongues -->
                            <!-- ----------------------- -->
                            <dl>
                                <dt>
                                    <div id="arnold" class="container">
                                        <div class="column">
                                            <div style="width:100%;align-items: right;">
                                                <svg width="60%" height="40%" viewBox="0 0 433 123" version="1.1"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
                                                    xmlns:serif="http://www.serif.com/"
                                                    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:10;margin-bottom: -40px;">
                                                    <rect id="chaos_blog_arnold_legend" x="0" y="0" width="432.532"
                                                        height="122.574" style="fill:none;" />
                                                    <g transform="matrix(4.16667,0,0,4.16667,-424.58,-228.168)">
                                                        <text x="106.668px" y="62.952px"
                                                            style="font-size:8px;">infection</text><text x="110.893px"
                                                            y="70.952px" style="font-size:8px;">waves</text>
                                                        <g transform="matrix(8,0,0,8,136.24,78.952)"></g><text x="106.893px"
                                                            style="font-size:8px;" y="78.952px">per year</text>
                                                    </g>
                                                    <rect x="155.817" y="77.624" width="256.766" height="26.24"
                                                        style="fill:#fff;" />
                                                    <path d="M155.817,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#ffffd9;fill-rule:nonzero;" />
                                                    <path d="M184.346,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#edf8b1;fill-rule:nonzero;" />
                                                    <path d="M212.876,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#c7e9b4;fill-rule:nonzero;" />
                                                    <path d="M241.405,103.864l0,-26.24l28.53,0l0,26.24l-28.53,0"
                                                        style="fill:#7fcdbb;fill-rule:nonzero;" />
                                                    <path d="M269.935,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#41b6c4;fill-rule:nonzero;" />
                                                    <path d="M298.465,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#1d91c0;fill-rule:nonzero;" />
                                                    <path d="M326.994,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#225ea8;fill-rule:nonzero;" />
                                                    <path d="M355.524,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#253494;fill-rule:nonzero;" />
                                                    <path d="M384.053,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill-rule:nonzero;" />
                                                    <path d="M170.082,77.624l-0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M198.611,77.624l0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M227.141,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M255.67,77.624l0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M284.2,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M312.729,77.624l0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M341.259,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M369.788,77.624l0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M398.318,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <rect x="155.817" y="77.624" width="256.766" height="26.24"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;stroke-linecap:square;stroke-linejoin:miter;" />
                                                    <g transform="matrix(33.3333,0,0,33.3333,178.778,55.3933)"></g>
                                                    <text x="160.239px" y="55.393px" style="font-size:33.333px;">1</text>
                                                    <g transform="matrix(33.3333,0,0,33.3333,321.865,56.4845)"></g>
                                                    <text x="303.326px" y="56.484px" style="font-size:33.333px;">2</text>
                                                    <g transform="matrix(33.3333,0,0,33.3333,377.977,54.7698)"></g>
                                                    <text x="359.439px" y="54.77px" style="font-size:33.333px;">3</text>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-119.245,-322.78)">
                                                        <text x="74.189px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,77.3034,91.282)"></g><text
                                                            x="74.189px" y="91.282px" style="font-size:5.6px;">4</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-132.047,-322.78)">
                                                        <text x="84.685px" y="84.622px" style="font-size:5.6px;">4</text>
                                                        <g transform="matrix(5.6,0,0,5.6,87.7995,91.282)"></g><text
                                                            x="84.685px" y="91.282px" style="font-size:5.6px;">3</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-147.176,-323.362)">
                                                        <text x="95.181px" y="84.699px" style="font-size:5.6px;">3</text>
                                                        <g transform="matrix(5.6,0,0,5.6,98.2956,91.4286)"></g><text
                                                            x="95.181px" y="91.429px" style="font-size:5.6px;">2</text>
                                                    </g>
                                                    <rect x="189.876" y="36.381" width="14.845" height="2.083" />
                                                    <rect x="219.644" y="35.48" width="14.845" height="2.083" />
                                                    <rect x="248.83" y="34.954" width="14.845" height="2.083" />
                                                    <g transform="matrix(4.16667,0,0,4.16667,-163.901,-323.91)">
                                                        <text x="105.677px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,108.792,91.3549)"></g><text
                                                            x="105.677px" y="91.355px" style="font-size:5.6px;">3</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-104.294,-323.328)">
                                                        <text x="105.677px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,108.792,91.3549)"></g><text
                                                            x="105.677px" y="91.355px" style="font-size:5.6px;">2</text>
                                                    </g>
                                                    <rect x="276.42" y="35.251" width="14.845" height="2.083" />
                                                    <rect x="333.884" y="34.109" width="14.845" height="2.083" />
                                                    <g transform="matrix(6.12323e-17,-1,1,6.12323e-17,-2715.79,-1487.12)">
                                                        <g transform="matrix(25,0,0,25,-1491.55,3121.12)"></g><text
                                                            x="-1548.53px" y="3121.12px"
                                                            style="font-size:25px;">other</text>
                                                    </g>
                                                </svg>
                                            </div>
                                            <div id="plot_arnold"></div>
                                        </div>
                                        <div class="column">
                                            <div id="plot_arnold_timeseries"></div>
                                        </div>
                                    </div>
                                </dt>

                                <dd>
                                    <p style="margin-bottom: 25em;"></p>

                                    <top id="marker_seasonal">For less intense mitigation measures with a great
                                        delay, the influence of seasonality dominates – as the yellow colour indicates,
                                        we witness one wave per year. Though mitigation does change the peaks’ heights,
                                        it is not strong enough to induce waves of its own.
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_diseasonal">Strong mitigation measures will strongly influence infection
                                        dynamics, letting multiple infection waves per year emerge. Somewhat of a recurring
                                        pattern can however still be made out.
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <br>
                                    <top>
                                        <div class="bg-white text-dark" style="padding-left:100px; margin-left:-100px;">
                                            <h5 style="background-color: rgba(255, 255, 255, 0.9);">Slight changes in
                                                societies reactions
                                                can vastly alter infection dynamics
                                            </h5>
                                            Real life is not as set in stone as a simplified model – <em>society’s reactions
                                                to infections will always slightly differ</em>, both in intensity and delay.
                                            These variations can be imagined as a spot slightly “moving” within our figure.
                                            The effects of this can vary: If located in the broad yellow area, you are
                                            likely to remain there, even if movement is involved. In the "dense phase space"
                                            areas, however, where different colours are located close to each other, small
                                            variations can easily move us into a different "category". In these areas,
                                            <em>minor changes in mitigation behaviour can lead to big changes in the
                                                dynamic</em>. That further “complicates” the witnessed infection course, as
                                            these jumps between colours can constantly change the infection dynamics.
                                        </div>
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_complex1">This spot is located in an area of the figure where shapes and
                                        colours appear to overlap. Here, slight changes in maximal mitigation or in
                                        mitigation delay can strongly alter the infection dynamics. Consequently, if society
                                        mitigates a disease in ways that correspond with this area, it is
                                        possible to end up with <em>complex infection dynamics</em>.
                                    </top>

                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_complex2">The graph remains complex, yet the slight change in spots
                                        was enough to alter its course. As we can see, infection dynamics can vastly differ
                                        for different societal reactions.
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top>
                                        <div class="bg-white text-dark" style="padding-left:100px; margin-left:-100px;">
                                            <h5 style="background-color: rgba(255, 255, 255, 0.9);">Incomplete knowledge
                                                about the current state impedes prediction
                                            </h5>
                                            Besides seasonality and mitigation measures, the initial number of infections
                                            also influences dynamics by serving as the starting point for future waves and
                                            societal reactions. That number matters to such an extent that for complex areas
                                            of the figure, a change in initial conditions is enough to cause different
                                            dynamics – even if the mitigation behaviour remains the same! As seen in the two
                                            graphs below, such a change can also alter the number of exhibited waves/peaks.
                                            (Remembering the figure above, this change of course would be reflected in a
                                            different colour distribution.) For complex regions, such sensitivity to initial
                                            conditions can be characteristic and even exceed the precision of data, making
                                            long-term predictions rather difficult.
                                        </div>
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_complex3">A different initial number on the same parameter spot can mean
                                        vastly different infection dynamics. The largest infection wave is about double the
                                        size as before!
                                    </top>
                                    <p style="margin-bottom: 20em;"></p><br>
                                </dd>
                            </dl>
                            [Closing sentence missing! Link initial number of infections to incomplete knowledge of the
                            state bc of hidden infections. Also maybe introduce the boxes...]
                            <!-- Boxes: Kinds of complexity -->
                            <div class="content col col-xl-10 col-md-12 align-self-center">
                                <!--  Box 0: Dense phase space -->
                                <div class="card bg-light text-dark">
                                    <div class="card-body">
                                        <a class="collapsed" data-bs-toggle="collapse" data-bs-target="#collapse-dense"
                                            aria-expanded="true" aria-controls="collapse-dense">
                                            <h5 class="card-title text-dark">
                                                Kinds of complexity: Dense phase space / Phase transitions
                                                <div class="collapse-icon bi bi-chevron-down"></div>
                                            </h5>
                                            <div class="card-text collapse text-dark" id="collapse-dense">
                                                Needs to be written. Or can it be cut?
                                            </div>
                                        </a>

                                    </div>
                                </div>
                                <!--  Box 1: Chaos -->
                                <div class="card bg-light text-dark">
                                    <div class="card-body">
                                        <a class="collapsed" data-bs-toggle="collapse" data-bs-target="#collapse-chaos"
                                            aria-expanded="true" aria-controls="collapse-chaos">
                                            <h5 class="card-title text-dark">
                                                Kinds of complexity: Chaos
                                                <div class="collapse-icon bi bi-chevron-down"></div>
                                            </h5>
                                            <div class="card-text collapse text-dark" id="collapse-chaos">
                                                The <b>chaos</b> concept we talk about here means that even slight
                                                changes in initial conditions will result in large changes in the overall
                                                dynamic. For infection dynamics located in chaotic regions, initial
                                                conditions therefore matter to an extent of exact precision. That also
                                                impedes the long-term predictability of infection spread for these areas, as
                                                it is impossible to collect data with such accuracy.
                                            </div>
                                        </a>

                                    </div>
                                </div>
                                <!--  Box 2: Coexisting Attractors -->
                                <div class="card bg-light text-dark">
                                    <div class="card-body">
                                        <a class="collapsed" data-bs-toggle="collapse" data-bs-target="#collapse-coexisting"
                                            aria-expanded="true" aria-controls="collapse-coexisting">
                                            <h5 class="card-title text-dark">
                                                Kinds of Complexity: Coexisting Attractors
                                                <div class="collapse-icon bi bi-chevron-down"></div>
                                            </h5>
                                            <div class="card-text collapse text-dark" id="collapse-coexisting">
                                                <b>Coexisting attractors</b> are similar to chaos in their dependency on
                                                initial conditions, yet differ when it comes to extent and outcome: Chaos
                                                can be seen as somewhat more sensitive, with dynamics changing into
                                                different kinds when initial conditions differ ever so slightly. For
                                                coexisting attractors, we can imagine a set of different dynamics, one of
                                                which will be strived towards in every run. They thus serve as "attractors",
                                                with the initial conditions determining under which dynamic's "sphere of
                                                influence" the run will fall. Therefore, if only slightly varying the
                                                initial conditions, the current attractor will likely remain the same, and
                                                the long-term infection course will not change much (unless the initial
                                                condition is located very close to the "border area" between two different
                                                attractors). Comparably bigger changes will, in contrast, again result in
                                                very different dynamics due to the switch towards another attractor.
                                            </div>
                                        </a>

                                    </div>
                                </div>
                            </div>

                            <!-- --------------- -->
                            <!-- Part III: Costs -->
                            <!-- --------------- -->
                            <h5>What areas are we likely to enter?</h5>
                            Infection spread is costly for a society – coming along with <span
                                class="mitigation-costs">mitigation costs</span> (economic
                            costs of limiting workforce, psychological costs of limiting contacts, etc.) and <span
                                class="infection-costs">infection costs</span> (people suffering, hospitals being
                            overloaded, etc.). Rationally, <em>society will
                                strive to act and mitigate in the most cost-optimal way</em>. For this cost-optimal
                            mitigation behaviour, total costs are minimal. Finding out how intensely and with what delay
                            society would need to react in order to reach this point would also allow us to calculate what
                            cost-optimal infection dynamics look like.
                            <dl>
                                <dt>
                                    <div id="costs" class="container">
                                        <div class="column">
                                            <div id="plot_costs"></div>
                                        </div>
                                        <div class="column">
                                            <div style="width:100%;align-items: right;">
                                                <svg width="60%" height="40%" viewBox="0 0 433 123" version="1.1"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
                                                    xmlns:serif="http://www.serif.com/"
                                                    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:10;margin-bottom: -40px;">
                                                    <rect id="chaos_blog_arnold_legend" x="0" y="0" width="432.532"
                                                        height="122.574" style="fill:none;" />
                                                    <g transform="matrix(4.16667,0,0,4.16667,-424.58,-228.168)">
                                                        <text x="106.668px" y="62.952px"
                                                            style="font-size:8px;">infection</text><text x="110.893px"
                                                            y="70.952px" style="font-size:8px;">waves</text>
                                                        <g transform="matrix(8,0,0,8,136.24,78.952)"></g><text x="106.893px"
                                                            style="font-size:8px;" y="78.952px">per year</text>
                                                    </g>
                                                    <rect x="155.817" y="77.624" width="256.766" height="26.24"
                                                        style="fill:#fff;" />
                                                    <path d="M155.817,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#ffffd9;fill-rule:nonzero;" />
                                                    <path d="M184.346,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#edf8b1;fill-rule:nonzero;" />
                                                    <path d="M212.876,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#c7e9b4;fill-rule:nonzero;" />
                                                    <path d="M241.405,103.864l0,-26.24l28.53,0l0,26.24l-28.53,0"
                                                        style="fill:#7fcdbb;fill-rule:nonzero;" />
                                                    <path d="M269.935,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#41b6c4;fill-rule:nonzero;" />
                                                    <path d="M298.465,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#1d91c0;fill-rule:nonzero;" />
                                                    <path d="M326.994,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill:#225ea8;fill-rule:nonzero;" />
                                                    <path d="M355.524,103.864l-0,-26.24l28.529,0l0,26.24l-28.529,0"
                                                        style="fill:#253494;fill-rule:nonzero;" />
                                                    <path d="M384.053,103.864l0,-26.24l28.53,0l-0,26.24l-28.53,0"
                                                        style="fill-rule:nonzero;" />
                                                    <path d="M170.082,77.624l-0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M198.611,77.624l0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M227.141,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M255.67,77.624l0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M284.2,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M312.729,77.624l0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M341.259,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M369.788,77.624l0,-14.583"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <path d="M398.318,77.624l-0,-7.887"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;" />
                                                    <rect x="155.817" y="77.624" width="256.766" height="26.24"
                                                        style="fill:none;fill-rule:nonzero;stroke:#000;stroke-width:3.33px;stroke-linecap:square;stroke-linejoin:miter;" />
                                                    <g transform="matrix(33.3333,0,0,33.3333,178.778,55.3933)"></g>
                                                    <text x="160.239px" y="55.393px" style="font-size:33.333px;">1</text>
                                                    <g transform="matrix(33.3333,0,0,33.3333,321.865,56.4845)"></g>
                                                    <text x="303.326px" y="56.484px" style="font-size:33.333px;">2</text>
                                                    <g transform="matrix(33.3333,0,0,33.3333,377.977,54.7698)"></g>
                                                    <text x="359.439px" y="54.77px" style="font-size:33.333px;">3</text>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-119.245,-322.78)">
                                                        <text x="74.189px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,77.3034,91.282)"></g><text
                                                            x="74.189px" y="91.282px" style="font-size:5.6px;">4</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-132.047,-322.78)">
                                                        <text x="84.685px" y="84.622px" style="font-size:5.6px;">4</text>
                                                        <g transform="matrix(5.6,0,0,5.6,87.7995,91.282)"></g><text
                                                            x="84.685px" y="91.282px" style="font-size:5.6px;">3</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-147.176,-323.362)">
                                                        <text x="95.181px" y="84.699px" style="font-size:5.6px;">3</text>
                                                        <g transform="matrix(5.6,0,0,5.6,98.2956,91.4286)"></g><text
                                                            x="95.181px" y="91.429px" style="font-size:5.6px;">2</text>
                                                    </g>
                                                    <rect x="189.876" y="36.381" width="14.845" height="2.083" />
                                                    <rect x="219.644" y="35.48" width="14.845" height="2.083" />
                                                    <rect x="248.83" y="34.954" width="14.845" height="2.083" />
                                                    <g transform="matrix(4.16667,0,0,4.16667,-163.901,-323.91)">
                                                        <text x="105.677px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,108.792,91.3549)"></g><text
                                                            x="105.677px" y="91.355px" style="font-size:5.6px;">3</text>
                                                    </g>
                                                    <g transform="matrix(4.16667,0,0,4.16667,-104.294,-323.328)">
                                                        <text x="105.677px" y="84.622px" style="font-size:5.6px;">5</text>
                                                        <g transform="matrix(5.6,0,0,5.6,108.792,91.3549)"></g><text
                                                            x="105.677px" y="91.355px" style="font-size:5.6px;">2</text>
                                                    </g>
                                                    <rect x="276.42" y="35.251" width="14.845" height="2.083" />
                                                    <rect x="333.884" y="34.109" width="14.845" height="2.083" />
                                                    <g transform="matrix(6.12323e-17,-1,1,6.12323e-17,-2715.79,-1487.12)">
                                                        <g transform="matrix(25,0,0,25,-1491.55,3121.12)"></g><text
                                                            x="-1548.53px" y="3121.12px"
                                                            style="font-size:25px;">other</text>
                                                    </g>
                                                </svg>
                                            </div>
                                            <div id="plot_costs_arnold"></div>
                                        </div>
                                    </div>
                                </dt>
                                <dd>
                                    <!-- <p style="margin-bottom: 20em;"></p> -->

                                    <top id="marker_costs1">The relation of infection costs and mitigation costs
                                        resemble an inverse
                                        proportion: With rising mitigation measures, infection costs fall due to fewer
                                        people
                                        getting
                                        infected, whilst mitigation costs start to increase steeply as very high mitigation
                                        measures
                                        become harder to implement. It follows that the cost-optimal region will be found
                                        somewhere
                                        in the middle – where mitigation is strong enough to flatten
                                        infections
                                        but
                                        not yet immensely costly.
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_costs2">
                                        <div class="bg-white text-dark" style="padding-left:100px; margin-left:-100px;">
                                            <h5 style="background-color: rgba(255, 255, 255, 0.9);">Complexity is
                                                Cost-Optimal</h5>
                                            Knowing cost-optimal mitigation behaviour allows us to find the corresponding
                                            cost-optimal
                                            dynamic. For that, the optimal spot identified above can be transferred into our
                                            first
                                            figure,
                                            which shows the number of infection waves for different mitigation behaviours.
                                        </div>
                                    </top>
                                    <p style="margin-bottom: 25em;"></p>
                                    <top id="marker_costs3">
                                        Similar cost calculations can be done for the rest of the figure, revealing a new
                                        finding: The
                                        cost-optimal spots appear to almost perfectly align with “border areas” of the
                                        figure, as well
                                        as with the complex region identified before. To quote the paper: <em>“[The]
                                            cost-optimal region
                                            may coincide with the region of complex […] infection dynamics.”</em>
                                    </top>
                                    <p style="margin-bottom: 20em;"></p><br>
                                </dd>
                            </dl>
                            This relation shows that not only is it possible for a society to end up with
                            complex infection
                            dynamics, but it is rational too. This can lead to us actually encountering these
                            dynamics in
                            real life. [Statistically, the model with which these results were [attained] can
                            also align with
                            the dynamics of COVID-19. [ask.]] Such [accordance] of calculations and data plays
                            an
                            important role when it comes to the support of [scientific [suggestions/results]].
                            <br><br>
                            This connection between societal behaviour, complexity, and cost-optimality is what you
                            should take away from this article: That <em>if an infectious disease is severe enough to be
                                societally
                                mitigated, complex infection dynamics become possible – and if mitigating cost-optimally,
                                this
                                possibility becomes reality.</em>
                            <br><br><br>
                            See the paper for the full
                            research:<br>
                            <a href="https://doi.org/10.1103/PhysRevResearch.7.013308"><em>Societal self-regulation induces
                                    complex infection dynamics and chaos</em>, <b></b>Phys. Rev. Research (2025)</a>
                            <br><br>
                            <h4>Involved Scientists</h4>
                            Joel Wagner<br>
                            Simon Bauer<br>
                            Seba Contreras<br>
                            Luk Fleddermann<br>
                            Ulrich Parlitz<br>
                            Viola Priesemann<br><br><br>
                        </blog>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    // ------------ //
    // Part 0: Data //
    // ------------ //
    async function createDataPlots(influenza_selectors, covid_selectors) {
        console.log("Creating Data Plots...")
        //// Influenza
        // Load seasonality data from CSV file
        let color = "#2F4F4F";
        const data_influenza = await d3.csv("files/data-influenza.csv");
        const dateParse = d3.timeParse("%Y-%m-%d");
        data_influenza.forEach(d => {
            d.date = dateParse(d.date);
            d.Spain = +d.Spain;
            d.Netherlands = +d.Netherlands;
            d.France = +d.France;
        });

        let x_domain = d3.extent(data_influenza, d => d.date);
        let y_domain_sp = d3.extent(data_influenza, d => d.Spain);
        let y_domain_nl = d3.extent(data_influenza, d => d.Netherlands);
        let y_domain_fr = d3.extent(data_influenza, d => d.France);
        // Plot
        let margin = { top: 50, right: 30, bottom: 5, left: 60 };
        let width = 150, height = 30;
        let plot_sp = createsvg(influenza_selectors[0], x_domain, y_domain_sp, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_influenza, color, plot_sp, 'date', 'Spain', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_sp.svg.select(".x-axis path.domain").remove();
        plot_sp.svg.selectAll(".x-axis .tick line").remove();
        plot_sp.svg.selectAll(".x-axis .tick text").remove();
        plot_sp.svg.selectAll(".y-axis .tick line").remove();
        plot_sp.svg.selectAll(".y-axis .tick text").remove();
        plot_sp.svg.append("text")
            .attr("x", -height / 1.0)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('Spain');
        plot_sp.svg.append("text")
            .attr("x", width / 10)
            .attr("y", -10)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("incidence of influenza");
        margin = { top: 5, right: 30, bottom: 5, left: 60 };
        width = 150, height = 30;
        let plot_nl = createsvg(influenza_selectors[1], x_domain, y_domain_nl, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_influenza, color, plot_nl, 'date', 'Netherlands', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_nl.svg.select(".x-axis path.domain").remove();
        plot_nl.svg.selectAll(".x-axis .tick line").remove();
        plot_nl.svg.selectAll(".x-axis .tick text").remove();
        plot_nl.svg.selectAll(".y-axis .tick line").remove();
        plot_nl.svg.selectAll(".y-axis .tick text").remove();
        plot_nl.svg.append("text")
            .attr("x", -height / 1.3)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('NL');
        margin = { top: 5, right: 30, bottom: 30, left: 60 };
        width = 150, height = 30;
        let plot_fr = createsvg(influenza_selectors[2], x_domain, y_domain_fr, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_influenza, color, plot_fr, 'date', 'France', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_fr.svg.selectAll(".y-axis .tick line").remove();
        plot_fr.svg.selectAll(".y-axis .tick text").remove();
        plot_fr.svg.append("text")
            .attr("x", -height / 0.9)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('France');

        //// COVID-19
        // Load seasonality data from CSV file
        color = "#2F4F4F";
        const data_covid = await d3.csv("files/data-covid19.csv");
        data_covid.forEach(d => {
            d.date = dateParse(d.date);
            d.Spain = +d.Spain;
            d.Netherlands = +d.Netherlands;
            d.France = +d.France;
        });

        x_domain = d3.extent(data_covid, d => d.date);
        y_domain_sp = d3.extent(data_covid, d => d.Spain);
        y_domain_nl = d3.extent(data_covid, d => d.Netherlands);
        y_domain_fr = d3.extent(data_covid, d => d.France);
        // Plot
        margin = { top: 20, right: 30, bottom: 5, left: 60 };
        width = 150, height = 30;
        plot_sp = createsvg(covid_selectors[0], x_domain, y_domain_sp, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_covid, color, plot_sp, 'date', 'Spain', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_sp.svg.select(".x-axis path.domain").remove();
        plot_sp.svg.selectAll(".x-axis .tick line").remove();
        plot_sp.svg.selectAll(".x-axis .tick text").remove();
        plot_sp.svg.selectAll(".y-axis .tick line").remove();
        plot_sp.svg.selectAll(".y-axis .tick text").remove();
        plot_sp.svg.append("text")
            .attr("x", -height / 1.0)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('Spain');
        plot_sp.svg.append("text")
            .attr("x", width / 10)
            .attr("y", -10)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("incidence of COVID-19");
        margin = { top: 5, right: 30, bottom: 5, left: 60 };
        width = 150, height = 30;
        plot_nl = createsvg(covid_selectors[1], x_domain, y_domain_nl, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_covid, color, plot_nl, 'date', 'Netherlands', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_nl.svg.select(".x-axis path.domain").remove();
        plot_nl.svg.selectAll(".x-axis .tick line").remove();
        plot_nl.svg.selectAll(".x-axis .tick text").remove();
        plot_nl.svg.selectAll(".y-axis .tick line").remove();
        plot_nl.svg.selectAll(".y-axis .tick text").remove();
        plot_nl.svg.append("text")
            .attr("x", -height / 1.3)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('NL');
        margin = { top: 5, right: 30, bottom: 30, left: 60 };
        width = 150, height = 30;
        plot_fr = createsvg(covid_selectors[2], x_domain, y_domain_fr, margin, width, height, x_scale = "time");
        add_scrollable_lineplot(data_covid, color, plot_fr, 'date', 'France', x_min = 'all', y_domain = 'auto', initial_opacity = 1);
        plot_fr.svg.selectAll(".y-axis .tick line").remove();
        plot_fr.svg.selectAll(".y-axis .tick text").remove();
        plot_fr.svg.append("text")
            .attr("x", -height / 0.9)
            .attr("y", -margin.left / 5.)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('France');
    }
    createDataPlots(["#plot_influenza1", "#plot_influenza2", "#plot_influenza3"], ["#plot_covid1", "#plot_covid2", "#plot_covid3"]);

    // ----------------------------- //
    // Part I: Scrollable timeseries //
    // ----------------------------- //
    async function createScrollableTimeseries(selector) {
        console.log("Creating Timeseries...")
        //// Seasonality
        // Load seasonality data from CSV file
        const seasonality_color = "#5EBB78";
        const data_seasonality = await d3.csv("files/seasonality.csv");

        x_domain1 = d3.extent(data_seasonality, d => d.t);
        y_domain1 = d3.extent(data_seasonality, d => d.I);

        // Plot
        const margin = { top: 10, right: 30, bottom: 30, left: 60 };
        const width = 300, height = 110;
        let plot = createsvg(selector, x_domain1, y_domain1, margin, width, height);
        // Add X axis label
        plot.svg.append("text")
            .attr("x", width / 2.5)
            .attr("y", height + margin.top * 2.8)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("years");
        // Add Y axis label
        plot.svg.append("text")
            .attr("x", -height / 0.8)
            .attr("y", -margin.left / 1.6)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('% of the population infected');

        const seasonality = add_scrollable_lineplot(data_seasonality, seasonality_color, plot, 't', 'I', x_min = 'all', y_domain = 'auto', initial_opacity = 1)

        //// Mitigation
        const mitigation_color = "#658EC1";
        const t1 = 0.3888888888888889;
        const t2 = 0.8055555555555556;
        const data_mitigation = await d3.csv("files/mitigation.csv");

        x_domain2 = d3.extent(data_mitigation, d => d.t);
        y_domain2 = d3.extent(data_mitigation, d => d.I);

        plot.y.domain(y_domain2)

        // Plot the first part of the data up to t1
        const mitigation1 = add_scrollable_lineplot(data_mitigation, mitigation_color, plot, 't', 'I', x_range = [0, t1], y_domain2)
        const mitigation2 = add_scrollable_lineplot(data_mitigation, mitigation_color, plot, 't', 'I', x_range = [t1, t2], y_domain2)
        const mitigation3 = add_scrollable_lineplot(data_mitigation, mitigation_color, plot, 't', 'I', x_range = [t2, 5], y_domain2)

        //// Combined
        // Load seasonality data from CSV file
        const combined_color = "#84D3CB";
        const combined = await add_scrollable_lineplot_from_path("files/combined.csv", combined_color, plot, 't', 'I')


        //// Eventlistener
        output = document.querySelector("p#output");
        element = document.getElementById("content");

        element.addEventListener("scroll", (event) => {
            transition_time = 500
            const pos = element.scrollTop / (element.scrollHeight - element.clientHeight);

            const reference = document.getElementById('plot1').getBoundingClientRect().top;
            const marker_seasonality = document.getElementById('marker_seasonality').getBoundingClientRect().top;
            const marker_mitigation1 = document.getElementById('marker_mitigation1').getBoundingClientRect().top;
            const marker_mitigation2 = document.getElementById('marker_mitigation2').getBoundingClientRect().top;
            const marker_mitigation3 = document.getElementById('marker_mitigation3').getBoundingClientRect().top;
            const marker_combined = document.getElementById('marker_combined').getBoundingClientRect().top;

            if (reference <= marker_mitigation1) {// reset to state 0
                // Update domain
                transition_domain(plot, seasonality.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonality.line, 1, transition_time);
                transition_opacity(mitigation1.line, 0, transition_time);
                transition_opacity(mitigation2.line, 0, transition_time);
                transition_opacity(mitigation3.line, 0, transition_time);
                transition_opacity(combined.line, 0, transition_time);
            } else if (reference < marker_mitigation2) {
                // Update domain
                transition_domain(plot, mitigation1.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonality.line, 0, transition_time);
                transition_opacity(mitigation1.line, 1, transition_time);
                transition_opacity(mitigation2.line, 0, transition_time);
                transition_opacity(mitigation3.line, 0, transition_time);
                transition_opacity(combined.line, 0, transition_time);
            } else if (reference < marker_mitigation3) {
                // Update domain
                transition_domain(plot, mitigation1.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonality.line, 0, transition_time);
                transition_opacity(mitigation1.line, 1, transition_time);
                transition_opacity(mitigation2.line, 1, transition_time);
                transition_opacity(mitigation3.line, 0, transition_time);
                transition_opacity(combined.line, 0, transition_time);
            } else if (reference < marker_combined) {
                // Update domain
                transition_domain(plot, mitigation1.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonality.line, 0, transition_time);
                transition_opacity(mitigation1.line, 1, transition_time);
                transition_opacity(mitigation2.line, 1, transition_time);
                transition_opacity(mitigation3.line, 1, transition_time);
                transition_opacity(combined.line, 0, transition_time);
            } else {
                // Update domain
                transition_domain(plot, combined.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonality.line, 0, transition_time);
                transition_opacity(mitigation1.line, 0, transition_time);
                transition_opacity(mitigation2.line, 0, transition_time);
                transition_opacity(mitigation3.line, 0, transition_time);
                transition_opacity(combined.line, 1, transition_time);
            }
        });
    }
    createScrollableTimeseries("#plot1");

    // -------------------------- //
    // Part II: Scrollable Arnold //
    // -------------------------- //
    async function createScrollableArnold(selector_arnold, selector_timeseries) {
        console.log("Creating Arnold...")
        x_domain = [0, 50];
        y_domain = [0.75, 1.0];

        // Plot
        const margin_ad = { top: 30, right: 30, bottom: 40, left: 60 };
        const width_ad = 160, height_ad = 160;
        const plot_ad = createsvg(selector_arnold, x_domain, y_domain, margin_ad, width_ad, height_ad);
        // Add X axis label
        plot_ad.svg.append("text")
            .attr("x", width_ad / 4)
            .attr("y", height_ad + margin_ad.top * 1)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("mitigation delay");
        // Add Y axis label
        plot_ad.svg.append("text")
            .attr("x", -height_ad / 1.2)
            .attr("y", -margin_ad.left / 1.6)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('maximal mitigation');
        const image = plot_ad.svg.append("image")
            .attr("xlink:href", "img/chaos_blog_arnold.png")
            .attr("width", width_ad)
            .attr("height", height_ad)
            .attr("x", 0)
            .attr("y", 0);

        //// Markers
        const marker_color = "#CD5C5C";
        const circle = plot_ad.svg.append("circle")
            .attr("cx", plot_ad.x(10)) // x-coordinate
            .attr("cy", plot_ad.y(0.8)) // y-coordinate
            .attr("r", 5) // radius
            .attr("fill", marker_color)
            .attr("stroke", "#FFFFFF")
            .attr("stroke-width", 2)

        //// Timeseries
        // Load initial data from CSV file
        const data_seasonal = await d3.csv("files/regimes-seasonal.csv");

        x_domain = d3.extent(data_seasonal, d => d.t);
        y_domain = d3.extent(data_seasonal, d => d.I);

        // Plot
        const margin_ts = { top: 10, right: 30, bottom: 40, left: 60 };
        const width_ts = 300, height_ts = 160;
        const plot_ts = createsvg(selector_timeseries, x_domain, y_domain, margin_ts, width_ts, height_ts);
        // Add X axis label
        plot_ts.svg.append("text")
            .attr("x", width_ts / 2.5)
            .attr("y", height_ts + margin_ts.top * 2.8)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("years");
        // Add Y axis label
        plot_ts.svg.append("text")
            .attr("x", -height_ts / 1.0)
            .attr("y", -margin_ts.left / 1.6)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('% of the population infected');

        //// Combined
        seasonal = await add_scrollable_lineplot_from_path("files/regimes-seasonal.csv", marker_color, plot_ts, 't', 'I')
        diseasonal = await add_scrollable_lineplot_from_path("files/regimes-diseasonal.csv", marker_color, plot_ts, 't', 'I')
        complex1 = await add_scrollable_lineplot_from_path("files/regimes-complex1.csv", marker_color, plot_ts, 't', 'I')
        complex2 = await add_scrollable_lineplot_from_path("files/regimes-complex2.csv", marker_color, plot_ts, 't', 'I')
        complex3 = await add_scrollable_lineplot_from_path("files/regimes-complex3.csv", marker_color, plot_ts, 't', 'I')

        transition_opacity(seasonal.line, 0, 500)
        //// Eventlistener
        output = document.querySelector("p#output");
        element = document.getElementById("content");

        element.addEventListener("scroll", (event) => {
            transition_time = 500
            const pos = element.scrollTop / (element.scrollHeight - element.clientHeight);

            const reference = document.getElementById('arnold').getBoundingClientRect().top;
            const marker_seasonal = document.getElementById('marker_seasonal').getBoundingClientRect().top;
            const marker_diseasonal = document.getElementById('marker_diseasonal').getBoundingClientRect().top;
            const marker_complex1 = document.getElementById('marker_complex1').getBoundingClientRect().top;
            const marker_complex2 = document.getElementById('marker_complex2').getBoundingClientRect().top;
            const marker_complex3 = document.getElementById('marker_complex3').getBoundingClientRect().top;
            if (reference <= marker_seasonal) {// reset to state 0
                // Update domain
                transition_domain(plot_ts, seasonal.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 0, transition_time);
                transition_opacity(diseasonal.line, 0, transition_time);
                transition_opacity(complex1.line, 0, transition_time);
                transition_opacity(complex2.line, 0, transition_time);
                transition_opacity(complex3.line, 0, transition_time);
                // Move circle
                // transition_opacity(circle, 0, transition_time);
                move(circle, plot_ad, 45, 0.78, transition_time)
            } else if (reference <= marker_diseasonal) {// reset to state 0
                // Update domain
                transition_domain(plot_ts, seasonal.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 1, transition_time);
                transition_opacity(diseasonal.line, 0, transition_time);
                transition_opacity(complex1.line, 0, transition_time);
                transition_opacity(complex2.line, 0, transition_time);
                transition_opacity(complex3.line, 0, transition_time);
                // Move circle
                move(circle, plot_ad, 45, 0.78, transition_time)
            } else if (reference < marker_complex1) {
                // Update domain
                transition_domain(plot_ts, diseasonal.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 0, transition_time);
                transition_opacity(diseasonal.line, 1, transition_time);
                transition_opacity(complex1.line, 0, transition_time);
                transition_opacity(complex2.line, 0, transition_time);
                transition_opacity(complex3.line, 0, transition_time);
                // Move circle
                move(circle, plot_ad, 26, 0.85, transition_time)
            } else if (reference < marker_complex2) {
                // Update domain
                transition_domain(plot_ts, complex1.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 0, transition_time);
                transition_opacity(diseasonal.line, 0, transition_time);
                transition_opacity(complex1.line, 1, transition_time);
                transition_opacity(complex2.line, 0, transition_time);
                transition_opacity(complex3.line, 0, transition_time);
                // Move circle
                move(circle, plot_ad, 33, 0.85, transition_time)
            } else if (reference < marker_complex3) {
                // Update domain
                transition_domain(plot_ts, complex2.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 0, transition_time);
                transition_opacity(diseasonal.line, 0, transition_time);
                transition_opacity(complex1.line, 0, transition_time);
                transition_opacity(complex2.line, 1, transition_time);
                transition_opacity(complex3.line, 0, transition_time);
                // Move circle
                move(circle, plot_ad, 33, 0.84, transition_time)
            } else {
                // Update domain
                transition_domain(plot_ts, complex3.y_domain, transition_time);
                // Update lines
                transition_opacity(seasonal.line, 0, transition_time);
                transition_opacity(diseasonal.line, 0, transition_time);
                transition_opacity(complex1.line, 0, transition_time);
                transition_opacity(complex2.line, 0, transition_time);
                transition_opacity(complex3.line, 1, transition_time);
                // Move circle
                move(circle, plot_ad, 33, 0.84, transition_time)
            }
        });
    }
    createScrollableArnold("#plot_arnold", "#plot_arnold_timeseries");

    // -------------------------- //
    // Part III: Scrollable Costs //
    // -------------------------- //
    async function createScrollableCosts(selector_costs, selector_costs_arnold) {
        console.log("Creating Costs...")
        //// Costs
        const C_I_color = "#c18af9";
        const C_m_color = "#A3D773";
        // Load data from CSV file
        let data_costs = await d3.csv("files/costs.csv");
        data_costs = convertFieldsToNumber(data_costs);


        let x_domain_cs = [0.75, 1.];
        let y_domain_cs = [0.3, 18];

        // Plot
        const margin_cs = { top: 10, right: 30, bottom: 40, left: 60 };
        const width_cs = 200, height_cs = 160;
        const plot_cs = createsvg(selector_costs, x_domain_cs, y_domain_cs, margin_cs, width_cs, height_cs, x_scale = "linear", y_scale = "log");
        // Add X axis label
        plot_cs.svg.append("text")
            .attr("x", width_cs / 2.5)
            .attr("y", height_cs + margin_cs.top * 2.8)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("maximal mitigation");
        // Add Y axis label
        plot_cs.svg.append("text")
            .attr("x", -height_cs / 1.5)
            .attr("y", -margin_cs.left / 1.6)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('costs (a.u.)');

        // Plot
        const C_I = add_scrollable_lineplot(data_costs, C_I_color, plot_cs, 'Mmax', 'C_I', x_min = 'all', y_domain = y_domain_cs, initial_opacity = 1)
        const C_m = add_scrollable_lineplot(data_costs, C_m_color, plot_cs, 'Mmax', 'C_m', x_min = 'all', y_domain = y_domain_cs, initial_opacity = 1)
        // _cs, y_cs, 'Mmax', 'C_m', x_min = 'all', y_domain = y_domain_cs, initial_opacity = 1)
        const legend = plot_cs.svg.append("g")
            .attr("transform", "translate(10, 10)");

        const legendTexts = legend.selectAll("text")
            .data([
                { name: "infection costs", color: C_I_color },
                { name: "mitigation costs", color: C_m_color }
            ])
            .enter()
            .append("text")
            .attr("x", 20)
            .attr("y", (d, i) => i * 20 + 00)
            .attr("fill", d => d.color)
            .attr("class", "legend-text")
            .text(d => d.name);
        // Plot minimum
        let minimum_color = "#CD5C5C";
        const minimum_marker_top = 4;
        let minimum_line = plot_cs.svg.append("line")
            .attr("x1", plot_cs.x(0.871)) // set the x-coordinate of the start point
            .attr("y1", plot_cs.y(y_domain_cs[0])) // set the y-coordinate of the start point
            .attr("x2", plot_cs.x(0.871)) // set the x-coordinate of the end point
            .attr("y2", plot_cs.y(minimum_marker_top)) // set the y-coordinate of the end point
            .attr("stroke", minimum_color) // set the color of the line
            .attr("stroke-width", 1) // set the width of the line
            .attr("opacity", 0); // set initial opacity to 0

        const minimum_circle = plot_cs.svg.append("circle")
            .attr("cx", plot_cs.x(.871)) // x-coordinate
            .attr("cy", plot_cs.y(minimum_marker_top)) // y-coordinate
            .attr("r", 4) // radius
            .attr("fill", minimum_color)
            .attr("stroke", "#FFFFFF")
            .attr("stroke-width", 1.33)
            .attr("opacity", 0);
        //// Plot arnold
        x_domain_ad = [0, 50];
        y_domain_ad = [0.75, 1.0];

        const margin_ad = { top: 30, right: 30, bottom: 40, left: 60 };
        const width_ad = 160, height_ad = 160;
        const plot_ad = createsvg(selector_costs_arnold, x_domain_ad, y_domain_ad, margin_ad, width_ad, height_ad);
        // Add X axis label
        plot_ad.svg.append("text")
            .attr("x", width_ad / 4)
            .attr("y", height_ad + margin_ad.top * 1)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .text("mitigation delay");
        // Add Y axis label
        plot_ad.svg.append("text")
            .attr("x", -height_ad / 1.2)
            .attr("y", -margin_ad.left / 1.6)
            .attr("font-size", "12px")
            .attr("font-weight", "normal")
            .attr("transform", "rotate(-90)")
            .text('maximal mitigation');
        const image = plot_ad.svg.append("image")
            .attr("xlink:href", "img/chaos_blog_arnold.png")
            .attr("width", width_ad)
            .attr("height", height_ad)
            .attr("x", 0)
            .attr("y", 0);

        // Markers
        let data_optimal_costs = await d3.csv("files/optimal_costs.csv");
        data_optimal_costs = convertFieldsToNumber(data_optimal_costs);
        const markers = plot_ad.svg.selectAll("circle.new-marker")
            .data(data_optimal_costs, (d, i) => i)
            .enter()
            .append("circle")
            .attr("cx", d => plot_ad.x(d.tau))
            .attr("cy", d => plot_ad.y(d.Mmax))
            .attr("r", 3)
            .attr("fill", minimum_color)
            .attr("stroke", "#FFFFFF")
            .attr("stroke-width", 1)
            .attr("opacity", 0);
        //// Eventlistener
        output = document.querySelector("p#output");
        element = document.getElementById("content");

        element.addEventListener("scroll", (event) => {
            transition_time = 500;
            transition_delay = 100;
            const pos = element.scrollTop / (element.scrollHeight - element.clientHeight);

            const reference = document.getElementById('plot_costs').getBoundingClientRect().top;
            const marker_costs1 = document.getElementById('marker_costs1').getBoundingClientRect().top;
            const marker_costs2 = document.getElementById('marker_costs2').getBoundingClientRect().top;
            const marker_costs3 = document.getElementById('marker_costs3').getBoundingClientRect().top;
            if (reference <= marker_costs1) {// reset to state 0
                // Update lines
                transition_opacity(minimum_line, 0, transition_time);
                transition_opacity(markers, 0, transition_time);
                transition_opacity(minimum_circle, 0, transition_time);
                // Move circle
            } else if (reference <= marker_costs2) {
                // Update lines
                transition_opacity(minimum_line, 1, transition_time);
                transition_opacity(markers, 0, transition_time);
                transition_opacity(minimum_circle, 1, transition_time);
            } else if (reference <= marker_costs3) {
                // Update lines
                transition_opacity(minimum_line, 1, transition_time);
                transition_opacity(markers, 0, transition_time);
                transition_opacity(minimum_circle, 1, transition_time);
                markers.filter((d, index) => index === 3)
                    .transition()
                    .duration(transition_time)
                    .attr("opacity", 1);
            } else {
                // Update lines
                transition_opacity(minimum_line, 1, transition_time);
                transition_opacity(minimum_circle, 1, transition_time);
                fadeInMarkers(markers, transition_time, transition_delay);
            }
        });

    }
    createScrollableCosts("#plot_costs", "#plot_costs_arnold");

</script>

<script>
    // Make sure that stickied elements are centered vertically on the window 
    const dtElements = document.querySelectorAll('dt');
    element = document.getElementById("content");

    element.addEventListener('scroll', () => {
        console.log("test")
        const scrollTop = window.scrollY;
        const viewportHeight = window.innerHeight;

        dtElements.forEach(dt => {
            if (scrollTop + viewportHeight / 2 >= dt.offsetTop && scrollTop + viewportHeight / 2 <= dt.offsetTop + dt.offsetHeight) {
                dt.classList.add('sticky');
            } else {
                dt.classList.remove('sticky');
            }
        });
    });
</script>

<script>
    document.on
    var navbar_btn = document.getElementsByClassName("mobile-navigator-toggle")

    navbar_btn[0].onclick = function (e) {
        //Toggle header class
        sidebar = document.getElementById("sidebar")
        sidebar.classList.toggle("mobile-navigator-active");
        //Repalce icon with cross (x)
        navbar_btn[0].children[0].classList.toggle("bi-list");
        navbar_btn[0].children[0].classList.toggle("bi-x");
        //Toggle overflow i.e scrolling
        document.body.classList.toggle("prevent-scrolling");
    };

</script>